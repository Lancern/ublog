services:
  nginx:
    build: ./nginx
    networks:
      - host
      - ublog-net
    ports:
      - 443:443/tcp
    volumes:
      - type: bind
        source: /path/to/sslcert.pem
        target: /ublog-site/sslcert.pem
      - type: bind
        source: /path/to/sslcert.key
        target: /ublog-site/sslcert.key
  ublog-server:
    build: ./
    networks:
      - ublog-net
    volumes:
      - type: bind
        source: /path/to/ublog.db
        target: /ublog-site/ublog.db
      - type: bind
        source: /path/to/site.json
        target: /ublog-site/site.json
    command: serve -p 30000 -l logs
  ublog-ui:
    build: ./ui
    networks:
      - ublog-net
    command: -p 30000
    depends_on:
      - ublog
networks:
  hostnet:
    external: true
    name: host
  ublog-net:
